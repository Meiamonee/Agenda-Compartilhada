<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Agenda</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background-color: #f4f4f4; color: #333; }
        .container { max-width: 900px; margin: auto; background: #fff; padding: 30px; border-radius: 10px; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1); }
        .section { padding-bottom: 20px; margin-bottom: 20px; border-bottom: 1px solid #ccc; }
        .section:last-child { border-bottom: none; }
        h1, h2 { color: #2c3e50; }
        form { display: flex; flex-direction: column; gap: 10px; margin-bottom: 15px; }
        input, button { padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 16px; }
        button { background-color: #3498db; color: white; cursor: pointer; border: none; transition: background-color 0.3s ease; }
        button:hover { background-color: #2980b9; }
        pre { background-color: #ecf0f1; padding: 15px; border-radius: 6px; white-space: pre-wrap; word-wrap: break-word; font-size: 14px; max-height: 300px; overflow-y: auto; }
    </style>
</head>
<body>
<div class="container">
    <h1>Sistema de Agenda Compartilhada</h1>
    <p>Acesse o menu de funcionalidades abaixo para interagir com suas APIs de Usuários e Eventos.</p>
    <hr>
    
    <div class="section">
        <h2>Registro e Login</h2>
        <form id="register-form">
            <h3>Registrar</h3>
            <input type="text" id="reg-nome" placeholder="Nome" required>
            <input type="email" id="reg-email" placeholder="Email" required>
            <input type="password" id="reg-senha" placeholder="Senha" required>
            <button type="submit">Registrar</button>
        </form>
        <pre id="register-output"></pre>
        <form id="login-form">
            <h3>Login</h3>
            <input type="email" id="login-email" placeholder="Email" required>
            <input type="password" id="login-senha" placeholder="Senha" required>
            <button type="submit">Entrar</button>
        </form>
        <pre id="login-output"></pre>
    </div>

    <div class="section">
        <h2>Eventos</h2>
        <form id="create-event-form">
            <h3>Criar Evento</h3>
            <input type="text" id="event-titulo" placeholder="Título do Evento" required>
            <input type="text" id="event-descricao" placeholder="Descrição do Evento">
            <input type="date" id="event-data" required>
            <input type="time" id="event-hora" required>
            <input type="number" id="event-usuario-id" placeholder="ID do Usuário" required>
            <button type="submit">Criar Evento</button>
        </form>
        <pre id="events-output"></pre>
        <br>
        <button onclick="listarEventos()">Listar Todos os Eventos</button>
        <pre id="list-events-output"></pre>
    </div>
</div>

<script>
    const userApiUrl = 'https://agenda-compartilhada-1.onrender.com';
    const eventApiUrl = 'https://agenda-compartilhada-becc.onrender.com';

    document.getElementById('register-form').addEventListener('submit', async (e) => {
        e.preventDefault();
        const nome = document.getElementById('reg-nome').value;
        const email = document.getElementById('reg-email').value;
        const senha = document.getElementById('reg-senha').value;
        
        const response = await fetch(`${userApiUrl}/usuarios`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ nome, email, senha })
        });
        const data = await response.json();
        document.getElementById('register-output').textContent = JSON.stringify(data, null, 2);
    });

    document.getElementById('login-form').addEventListener('submit', async (e) => {
        e.preventDefault();
        const email = document.getElementById('login-email').value;
        const senha = document.getElementById('login-senha').value;
        
        const response = await fetch(`${userApiUrl}/login`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ email, senha })
        });
        const data = await response.json();
        document.getElementById('login-output').textContent = JSON.stringify(data, null, 2);
    });

    async function listarUsuarios() {
        const response = await fetch(`${userApiUrl}/usuarios`);
        const data = await response.json();
        document.getElementById('list-users-output').textContent = JSON.stringify(data, null, 2);
    }
    
    document.getElementById('delete-user-form').addEventListener('submit', async (e) => {
        e.preventDefault();
        const id = document.getElementById('delete-user-id').value;

        const response = await fetch(`${userApiUrl}/usuarios/${id}`, {
            method: 'DELETE'
        });
        const data = await response.json();
        document.getElementById('delete-user-output').textContent = JSON.stringify(data, null, 2);
    });

    document.getElementById('create-event-form').addEventListener('submit', async (e) => {
        e.preventDefault();
        const titulo = document.getElementById('event-titulo').value;
        const descricao = document.getElementById('event-descricao').value;
        const data = document.getElementById('event-data').value;
        const hora = document.getElementById('event-hora').value;
        const usuario_id = parseInt(document.getElementById('event-usuario-id').value);

        const responseData = await fetch(eventApiUrl + '/eventos', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ titulo, descricao, data, hora, usuario_id })
        });
        const data = await responseData.json();
        document.getElementById('create-event-output').textContent = JSON.stringify(data, null, 2);
    });

    async function listarEventos() {
        const response = await fetch(eventApiUrl + '/eventos');
        const data = await response.json();
        document.getElementById('list-events-output').textContent = JSON.stringify(data, null, 2);
    }
</script>

</body>
</html>
